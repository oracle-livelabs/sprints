<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Deliver Enterprise JSON with Oracle AI Database</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;
    background:linear-gradient(to bottom right,#f8fafc,#e2e8f0);
    min-height:100vh;color:#1f2937;
  }
  .header{background:linear-gradient(to right,#0f766e,#115e59);color:#fff;padding:20px;box-shadow:0 4px 6px rgba(0,0,0,.1)}
  .header-content{max-width:1400px;margin:0 auto}
  .header-title{display:flex;align-items:center;gap:12px;margin-bottom:6px}
  .header-title h1{font-size:28px;font-weight:700}
  .header-subtitle{color:#99f6e4;font-size:14px}
  .problem-banner{background:#fff3cd;border:2px solid #ffc107;padding:12px;border-radius:8px;margin:16px auto;max-width:1400px;display:flex;align-items:center;justify-content:center;gap:8px}
  .problem-text{font-size:16px;color:#856404;font-weight:600}
  .container{max-width:1400px;margin:0 auto;padding:20px}

  .button-group{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px}
  .btn{padding:10px 16px;border-radius:8px;border:none;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;min-height:42px;color:#fff;position:relative}
  .btn:disabled{opacity:.4;cursor:not-allowed;pointer-events:none}
  .btn-blue{background:#0d9488}.btn-blue:hover{background:#0f766e}
  .btn-teal{background:#0d9488}.btn-teal:hover{background:#0f766e}
  .btn-orange{background:#ea580c}.btn-orange:hover{background:#c2410c}
  .btn-danger{background:#ef4444}.btn-danger:hover{background:#dc2626}
  .btn-purple{background:#9333ea}.btn-purple:hover{background:#7c3aed}
  .btn-gray{background:#e5e7eb;color:#374151}.btn-gray:hover{background:#d1d5db}
  .btn.completed{background:#16a34a!important}
  .btn.completed::before{content:'‚úì '}
  .btn.next-hint::after{content:'';position:absolute;inset:-4px;border-radius:10px;border:2px solid rgba(13,148,136,.0);animation:btnPulse 1.6s cubic-bezier(0.45, 0, 0.55, 1) infinite}
  @keyframes btnPulse{0%{box-shadow:0 0 0 0 rgba(13,148,136,.45);border-color:rgba(13,148,136,.35)}70%{box-shadow:0 0 0 12px rgba(13,148,136,0);border-color:rgba(13,148,136,.1)}100%{box-shadow:0 0 0 0 rgba(13,148,136,0);border-color:rgba(13,148,136,.0)}}

  .main-grid{display:grid;grid-template-columns:1fr 1.1fr;gap:20px}
  @media (max-width:1100px){.main-grid{grid-template-columns:1fr}}
  .panel{background:#fff;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,.1);overflow:hidden;display:flex;flex-direction:column}
  .panel-header{background:#1f2937;color:#fff;padding:12px 16px;display:flex;align-items:center;gap:8px;font-size:14px;font-weight:600}
  .panel-content{padding:16px;flex:1;overflow:auto;display:flex;flex-direction:column;gap:10px}

  .mode-indicator{display:none;background:#f0f9ff;border:2px solid #0284c7;padding:12px;border-radius:8px}
  .mode-indicator.mode-create{background:#ccfbf1;border-color:#0d9488;}
  .mode-indicator.mode-insert{background:#f3e8ff;border-color:#9333ea;}
  .mode-indicator.mode-query{background:#dbeafe;border-color:#2563eb;}
  .mode-indicator.mode-update{background:#ffedd5;border-color:#ea580c;}
  .mode-indicator.mode-delete{background:#fee2e2;border-color:#ef4444;}
  .mode-indicator.active{display:block}
  .mode-title{font-size:16px;font-weight:700;margin-bottom:2px}
  .mode-description{font-size:13px;color:#6b7280}

  .explain{display:none;background:#ffffff;border:2px solid #e5e7eb;padding:14px;border-radius:10px}
  .explain.active{display:block}
  .explain h3{font-size:14px;margin-bottom:6px;display:flex;gap:8px;align-items:center}
  .explain p{font-size:13px;color:#374151;line-height:1.45}
  .explain small{display:block;margin-top:6px;color:#6b7280}

  .explain-confirm{display:none;margin-top:8px;font-size:13px;background:#ecfdf5;border-left:3px solid #10b981;padding:8px 10px;border-radius:6px;color:#065f46}
  .explain-confirm.active{display:block}

  /*.results-summary{display:none;background:#dcfce7;border:2px solid #22c55e;padding:10px;border-radius:8px}
  .results-text{font-size:14px;font-weight:600;color:#065f46} */

  .stack-top{order:0}
  .stack-table{order:1}
  .stack-json{order:98}
  .stack-sql{order:99}

  .sql-output{display:none;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;padding:12px;font-family:monospace;font-size:13px}
  .code-display,.json-display{font-family:'Courier New',monospace;font-size:12px;white-space:pre-wrap;background:#f9fafb;padding:12px;border-radius:6px;border:1px solid #e5e7eb;min-height:80px}
  .data-table-container{display:none;margin-top:0}
  .data-table-wrap{max-height:280px;overflow:auto;border:1px solid #e5e7eb;border-radius:8px}
  table.data-table{width:100%;border-collapse:collapse;font-size:12px}
  .data-table th{position:sticky;top:0;background:#0d9488;color:#fff;padding:8px;text-align:left;z-index:1}
  .data-table td{padding:8px;border-bottom:1px solid #e5e7eb}
  .new-row{animation:fadeIn 1s ease-in}
  @keyframes fadeIn{from{background:#fef08a;opacity:0}to{background:transparent;opacity:1}}

  /* Highlight just the modified cell (e.g., Jane's status) */
  .cell-highlight {
    position: relative;
    font-weight: 700;
    color: #b45309; /* warm orange-brown */
    animation: cellGlow 1.4s ease-out 1;
  }

  @keyframes cellGlow {
    0% {
      background-color: #fffbeb;               /* light amber */
      box-shadow: 0 0 0 0 rgba(234, 88, 12, .7);
    }
    60% {
      background-color: #ffedd5;
      box-shadow: 0 0 0 10px rgba(234, 88, 12, 0);
    }
    100% {
      background-color: transparent;
      box-shadow: none;
    }
  }


  .visual{background:#09736a;border-radius:8px;min-height:315px;position:relative;overflow:hidden;padding:20px;}
  .app, .sql-sink, .json-sink{position:absolute;background:#fff;border-radius:8px;border:2px solid rgba(0,0,0,.08);padding:8px 10px;width:130px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,.15)}
  .app-title{font-size:11px;font-weight:700;color:#0d9488}
  .sink-title{font-size:11px;font-weight:700}
  .db{position:absolute;left:calc(50% - 85px);top:120px;width:170px;background:linear-gradient(135deg,#0d9488,#10b981);color:#fff;border-radius:10px;padding:16px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,.25)}
  .db-title{font-weight:800}.db-sub{font-size:12px;opacity:.95}
  .db.pulse{box-shadow:0 0 0 0 rgba(16,185,129,.6);animation:pulseGlow 2s cubic-bezier(0.45, 0, 0.55, 1) 1}

   /* --- FLOW LINES (Create stage) --- */
  .flow-line {
    position: absolute;
    height: 3px;
    border-radius: 9999px;
    opacity: 0;
    pointer-events: none;
    background-image: repeating-linear-gradient(
      to right,
      rgba(255, 255, 255, 0.15) 0px,
      rgba(255, 255, 255, 0.9) 8px,
      rgba(255, 255, 255, 0.15) 16px
    );
    background-size: 24px 3px;
  }

  .flow-line.active {
    opacity: 1;
    animation: flowDash 1.2s linear infinite;
  }

  /* Position for mobile ‚Üí DB */
  .flow-mobile {
    top: 65px;               /* tweak if needed */
    left: 160px;             /* just past the mobile card */
    width: calc(50% - 175px);/* from mobile to DB left edge */
  }

  /* Position for web ‚Üí DB */
  .flow-web {
    top: 226px;              /* tweak if needed */
    left: 160px;
    width: calc(50% - 175px);
  }

  /* Vertical connectors between the two lines and the DB box */
  .flow-connector {
    position: absolute;
    width: 3px;
    border-radius: 9999px;
    opacity: 0;
    pointer-events: none;
    background-image: repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.15) 0px,
      rgba(255, 255, 255, 0.9) 8px,
      rgba(255, 255, 255, 0.15) 16px
    );
    background-size: 3px 24px;
  }

  .flow-connector.active {
    opacity: 1;
    animation: flowDashVertical 1.2s linear infinite;
  }

  /* Hard-coded positions ‚Äì tweak top/height as needed */
  .flow-connect-up {
    left: calc(50% - 15px); /* same x as DB left edge */
    top: 65px;              /* starts at top horizontal line */
    height: 60px;           /* down toward top of DB */
  }

  .flow-connect-down {
    left: calc(50% - 15px); /* same x as DB left edge */
    top: 200px;             /* around bottom of DB */
    height: 30px;           /* down toward bottom horizontal line */
  }

  @keyframes flowDashVertical {
    from { background-position: 0 0; }
    to   { background-position: 0 24px; }
  }


  @keyframes flowDash {
    from { background-position: 0 0; }
    to   { background-position: 24px 0; }
  }


  /* --- FLOW LINES (Insert stage ‚Äì purple like Insert button) --- */
  /* reusing geometry from .flow-line; this only overrides color */
  .flow-line-insert {
    background-image: repeating-linear-gradient(
      to right,
      rgba(255, 255, 255, 0.9) 0px,   /* #9333ea with alpha */
      rgba(147, 51, 234, 0.9)  8px,
      rgba(255, 255, 255, 0.9) 16px
    );
  }

  .flow-line-insert.active {
    opacity: 1;
    animation: flowDash 1.2s linear infinite;
  }

  /* vertical purple connectors */
  .flow-connector-insert {
    background-image: repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.9) 0px,
      rgba(147, 51, 234, 0.9)  8px,
      rgba(255, 255, 255, 0.9) 16px
    );
    background-size: 3px 24px;
  }

  .flow-connector-insert.active {
    opacity: 1;
    animation: flowDashVertical 1.2s linear infinite;
  }

  /* --- FLOW LINES (Query stage ‚Äì blue like Generate Report button) --- */

  .flow-line-query {
    background-image: repeating-linear-gradient(
      to right,
      rgba(255, 255, 255, 0.9) 0px,   /* #2563eb with alpha */
      rgba(37, 99, 235, 0.9)  8px,
      rgba(255, 255, 255, 0.9) 16px
    );
  }

  .flow-line-query.active {
    opacity: 1;
    animation: flowDash 1.2s linear infinite;
  }

  /* vertical query connector */
  .flow-connector-query {
    background-image: repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.9) 0px,
      rgba(37, 99, 235, 0.9)  8px,
      rgba(255, 255, 255, 0.9) 16px
    );
    background-size: 3px 24px;
  }

  .flow-connector-query.active {
    opacity: 1;
    animation: flowDashVertical 1.2s linear infinite;
  }

  /* Geometry for DB ‚Üí Relational Queries path */
  .flow-query-horiz {
    position: absolute;
    top: 165px;                          /* middle of DB box */
    left: calc(50% + 85px);              /* right edge of DB box */
    width: calc(50% - 170px);            /* ends under Relational Queries */
  }

  .flow-query-vert {
    position: absolute;
    left: calc(100% - 85px);             /* center under Relational Queries */
    top: 75px;                           /* a bit under the card */
    height: 90px;                        /* down to meet the horizontal line */
  }

  /* --- FLOW LINES (Update stage ‚Äì orange like Modify button) --- */

  .flow-line-update {
    background-image: repeating-linear-gradient(
      to right,
      rgba(255, 255, 255, 0.9) 0px,
      rgba(234, 88, 12, 0.9)  8px,  /* #ea580c */
      rgba(255, 255, 255, 0.9) 16px
    );
  }

  .flow-line-update.active {
    opacity: 1;
    animation: flowDash 1.2s linear infinite;
  }

  /* vertical orange connector */
  .flow-connector-update {
    background-image: repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.9) 0px,
      rgba(234, 88, 12, 0.9)  8px,
      rgba(255, 255, 255, 0.9) 16px
    );
    background-size: 3px 24px;
  }

  .flow-connector-update.active {
    opacity: 1;
    animation: flowDashVertical 1.2s linear infinite;
  }

  /* Geometry for DB ‚Üí Document APIs path */
  .flow-update-horiz {
    position: absolute;
    top: 165px;                          /* slightly below DB center */
    left: calc(50% + 85px);              /* right edge of DB box */
    width: calc(50% - 170px);            /* across toward Document APIs */
  }

  .flow-update-vert {
    position: absolute;
    left: calc(100% - 85px);             /* under Document APIs center */
    top: 165px;                          /* just under the card */
    height: 70px;                        /* down to meet the horizontal */
  }

  /* --- FLOW LINES (Delete stage ‚Äì red like Remove button) --- */

  .flow-line-delete {
    background-image: repeating-linear-gradient(
      to right,
      rgba(255, 255, 255, 0.9) 0px,
      rgba(239, 68, 68, 0.9)  8px,  /* #ef4444 */
      rgba(255, 255, 255, 0.9) 16px
    );
  }

  .flow-line-delete.active {
    opacity: 1;
    animation: flowDash 1.2s linear infinite;
  }

  .flow-connector-delete {
    background-image: repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.9) 0px,
      rgba(239, 68, 68, 0.9)  8px,
      rgba(255, 255, 255, 0.9) 16px
    );
    background-size: 3px 24px;
  }

  .flow-connector-delete.active {
    opacity: 1;
    animation: flowDashVertical 1.2s linear infinite;
  }

  /* --- Delete X markers --- */
  .delete-x {
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 999px;
    border: 2px solid #ef4444;   /* same red as delete button */
    color: #ef4444;
    background: #fef2f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 700;
    pointer-events: none;
    opacity: 0;
    transform: scale(0.7);
    transition: opacity 0.2s ease, transform 0.2s ease;
  }

  .delete-x.active {
    opacity: 1;
    transform: scale(1);
  }

  /* positions for the two X marks */
  #xSqlDelete {
    left: calc(100% - 93px);  /* slightly left of the vertical line */
    top: 110px;               /* around middle of the Relational Queries line */
  }

  #xJsonDelete {
    left: calc(100% - 93px);  /* same x as above */
    top: 180px;               /* around middle of the Document APIs line */
  }


  .dest-glow{animation:destGlow 1200ms cubic-bezier(0.45, 0, 0.55, 1) 1}
  @keyframes destGlow{0%{box-shadow:0 0 0 0 rgba(56,189,248,.55)}60%{box-shadow:0 0 22px 8px rgba(56,189,248,.35)}100%{box-shadow:0 0 0 0 rgba(56,189,248,0)}}
  @keyframes pulseGlow{0%{box-shadow:0 0 0 0 rgba(16,185,129,.55)}70%{box-shadow:0 0 0 16px rgba(16,185,129,0)}100%{box-shadow:0 0 0 0 rgba(16,185,129,0)}}

  .packet{position:absolute;color:#fff;padding:7px 12px;border-radius:16px;font-size:11px;font-weight:700;opacity:0;pointer-events:none}
  .p-json{background:linear-gradient(135deg,#10b981,#059669)}
  .p-sql{background:linear-gradient(135deg,#3b82f6,#2563eb)}
  .p-der{background:linear-gradient(135deg,#f59e0b,#d97706)}
  /* Packets for Insert animation ‚Äì match btn-purple */
  .p-insert{background:linear-gradient(135deg,#9333ea,#7c3aed)}


  
/* Packets from Mobile ‚Üí DB, along the top dashed line then down into DB */
@keyframes jsonFromMobileToDB {
  0% {
    opacity: 0;
    left: 160px;            /* start of .flow-mobile */
    top: 65px;
  }
  10% {
    opacity: 1;
    left: 160px;
    top: 65px;
  }
  60% {
    opacity: 1;
    left: calc(50% - 15px); /* end of .flow-mobile / start of .flow-connect-up */
    top: 65px;
  }
  90% {
    opacity: 1;
    left: calc(50% - 15px);
    top: 125px;             /* down along .flow-connect-up toward DB */
  }
  100% {
    opacity: 0;
    left: calc(50% - 15px);
    top: 125px;
  }
}

/* Packets from Web ‚Üí DB, along the bottom dashed line then up into DB */
@keyframes jsonFromWebToDB {
  0% {
    opacity: 0;
    left: 160px;            /* start of .flow-web */
    top: 226px;
  }
  10% {
    opacity: 1;
    left: 160px;
    top: 226px;
  }
  60% {
    opacity: 1;
    left: calc(50% - 15px); /* end of .flow-web / start of .flow-connect-down */
    top: 226px;
  }
  90% {
    opacity: 1;
    left: calc(50% - 15px);
    top: 165px;             /* down along .flow-connect-down toward DB */
  }
  100% {
    opacity: 0;
    left: calc(50% - 15px);
    top: 165px;
  }
}

/* Packets from DB ‚Üí Relational Queries, along the blue path */
@keyframes dbToSQLLand {
  0% {
    opacity: 0;
    left: calc(50% + 85px); /* start of .flow-query-horiz (DB right edge) */
    top: 165px;
  }
  10% {
    opacity: 1;
    left: calc(50% + 85px);
    top: 165px;
  }
  60% {
    opacity: 1;
    left: calc(100% - 85px); /* end of .flow-query-horiz */
    top: 165px;
  }
  90% {
    opacity: 1;
    left: calc(100% - 85px); /* up along .flow-query-vert */
    top: 75px;
  }
  100% {
    opacity: 0;
    left: calc(100% - 85px);
    top: 75px;
  }
}

/* Packets from DB ‚Üí Document APIs, along the orange path */
@keyframes dbToJSONLand {
  0% {
    opacity: 0;
    left: calc(50% + 85px); /* start of .flow-update-horiz (DB right edge) */
    top: 165px;
  }
  10% {
    opacity: 1;
    left: calc(50% + 85px);
    top: 165px;
  }
  60% {
    opacity: 1;
    left: calc(100% - 85px); /* end of .flow-update-horiz */
    top: 165px;
  }
  90% {
    opacity: 1;
    left: calc(100% - 85px); /* down along .flow-update-vert */
    top: 210px;
  }
  100% {
    opacity: 0;
    left: calc(100% - 85px);
    top: 210px;
  }
}

/* Packets from DB ‚Üí Relational Queries, stopping at the X */
@keyframes dbDeleteToSQL {
  0% {
    opacity: 0;
    left: calc(50% + 85px);   /* DB right edge */
    top: 165px;
  }
  10% {
    opacity: 1;
    left: calc(50% + 85px);
    top: 165px;
  }
  60% {
    opacity: 1;
    left: calc(100% - 85px);  /* end of horizontal line */
    top: 165px;
  }
  90% {
    opacity: 1;
    left: calc(100% - 93px);  /* X position under Relational Queries */
    top: 110px;
  }
  100% {
    opacity: 0;
    left: calc(100% - 93px);
    top: 110px;
  }
}

/* Packets from DB ‚Üí Document APIs, stopping at the X */
@keyframes dbDeleteToJSON {
  0% {
    opacity: 0;
    left: calc(50% + 85px);   /* DB right edge */
    top: 165px;
  }
  10% {
    opacity: 1;
    left: calc(50% + 85px);
    top: 165px;
  }
  60% {
    opacity: 1;
    left: calc(100% - 85px);  /* end of horizontal line */
    top: 165px;
  }
  90% {
    opacity: 1;
    left: calc(100% - 93px);  /* X position under Document APIs */
    top: 180px;
  }
  100% {
    opacity: 0;
    left: calc(100% - 93px);
    top: 180px;
  }
}


.explain-right{background:#f0f9ff;border-left:4px solid #0284c7;padding:12px;border-radius:8px;margin-bottom:8px}
  .explain-right.explain-create{background:#ccfbf1;border-left-color:#0d9488;}
  .explain-right.explain-insert{background:#f3e8ff;border-left-color:#9333ea;}
  .explain-right.explain-query{background:#dbeafe;border-left-color:#2563eb;}
  .explain-right.explain-update{background:#ffedd5;border-left-color:#ea580c;}
  .explain-right.explain-delete{background:#fee2e2;border-left-color:#ef4444;}
  .explain-right h4{font-size:14px;font-weight:700;color:#0c4a6e;margin-bottom:6px}
  .explain-right .item{font-size:12px;color:#475569;line-height:1.6;margin-bottom:4px;padding-left:16px;position:relative}
  .explain-right .item::before{content:'‚Ä¢';position:absolute;left:0;color:#0284c7;font-weight:700}

  .fs-toggle{position:fixed;bottom:20px;right:20px;background:#0f766e;color:#fff;border:none;width:48px;height:48px;border-radius:50%;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;transition:all .2s;z-index:100}
  .fs-toggle:hover{background:#134e4a;transform:scale(1.08)}
  .fs-toggle svg{width:22px;height:22px;fill:currentColor}
</style>
</head>
<body>
  <div class="header">
    <div class="header-content">
      <div class="header-title">
        <svg width="32" height="32" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path>
        </svg>
        <h1>Deliver Enterprise JSON with Oracle AI Database</h1>
      </div>
      <p class="header-subtitle">Simplify data: JSON documents for apps AND full SQL for insights</p>
    </div>
  </div>

  <div class="problem-banner">
    <span class="problem-text"> "Store JSON documents once and use them as JSON and SQL in one system.  Apps, reports, and analytics stay in sync with no drift.‚Äù</span>
  </div>

  <div class="container">
    <div class="button-group">
      <button id="btnCreate" class="btn btn-teal">üì¶ Create JSON Collection</button>
      <button id="btnInsert" class="btn btn-purple" disabled>‚ûï Insert Document</button>
      <button id="btnQuery" class="btn btn-blue" disabled>üîç Generate Report</button>
      <button id="btnUpdate" class="btn btn-orange" disabled>‚úèÔ∏è Modify Document</button>
      <button id="btnDelete" class="btn btn-danger" disabled>üóëÔ∏è Remove Document</button>
      <button id="btnReset" class="btn btn-gray" style="color:#111827">üîÑ Restart Demo</button>
    </div>

    <div class="main-grid">
      <!-- Left -->
      <div class="panel">
        <div class="panel-header">JSON Collections - Live Demo</div>
        <div class="panel-content">
          <div id="modeIndicator" class="mode-indicator stack-top">
            <div class="mode-title"></div><div class="mode-description"></div>
          </div>

          <!-- LEFT EXPLANATION -->
          <div id="explain" class="explain stack-top">
            <h3 id="explainTitle">üëã Welcome</h3>
            <p id="explainBody">In this demo, you‚Äôll see how Oracle AI Database lets you use SQL to query JSON documents stored in the database. One database supports multiple data types and workloads, without needing separate specialized databases.</p>
            
          </div>

          <!-- <div id="resultsSummary" class="results-summary stack-top">
            <span class="results-text"></span>
          </div> -->

          <div id="dataTableContainer" class="data-table-container stack-table">
            <h3 style="margin:0 0 6px;font-size:14px">üìä Customers - Displayed in table format for simplicity  </h3>
            <div class="data-table-wrap">
              <table id="dataTable" class="data-table"></table>
            </div>
          </div>

          <!-- Code blocks at bottom -->
          <pre id="sampleContent" class="json-display stack-json"></pre>
          <div id="sqlOutput" class="sql-output stack-sql">
            <strong>SQL Query Results</strong>
            <pre id="sqlQuery" style="white-space:pre-wrap"></pre>
          </div>
        </div>
      </div>

      <!-- Right -->
      <div class="panel">
        <div class="panel-header">Oracle AI Database - JSON Collections, SQL-ready</div>
        <div class="panel-content">
          <!-- RIGHT EXPLANATION ABOVE ANIMATION -->
          <div id="explainRight" class="explain-right">
            <h4 id="explainRightTitle">What you‚Äôll do</h4>
            <div class="item" id="explainRightItem1"><strong>Create:</strong> Start a JSON Collection - simple, flexible storage.</div>
            <div class="item" id="explainRightItem2"><strong>Insert & Query:</strong> Add documents and analyze them with standard SQL.</div>
            <div class="item" id="explainRightItem3"><strong>Update & Delete:</strong> Safe, consistent updates - one source of truth.</div>
          </div>

          <!-- Here-->
          <div class="visual" id="visual">
            <div id="mobileApp" class="app" style="left:30px;top:50px">
                <div class="app-title">Mobile App üì±</div>
                <div style="font-size:10px;color:#666"></div>
            </div>

            <div id="webApp" class="app" style="left:30px;top:210px">
                <div class="app-title">Web App üíª </div>
                <div style="font-size:10px;color:#666"></div>
            </div>

            <!-- dashed flow lines for CREATE stage -->
            <div id="lineMobile" class="flow-line flow-mobile"></div>
            <div id="lineWeb" class="flow-line flow-web"></div>

            <!-- vertical connectors into the DB box -->
            <div id="connectUp" class="flow-connector flow-connect-up"></div>
            <div id="connectDown" class="flow-connector flow-connect-down"></div>

            <!-- dashed flow lines for INSERT stage (purple) -->
            <div id="lineMobileInsert" class="flow-line flow-line-insert flow-mobile"></div>
            <div id="lineWebInsert"   class="flow-line flow-line-insert flow-web"></div>

            <!-- vertical connectors for INSERT stage (purple) -->
            <div id="connectUpInsert"   class="flow-connector flow-connector-insert flow-connect-up"></div>
            <div id="connectDownInsert" class="flow-connector flow-connector-insert flow-connect-down"></div>

            <!-- dashed flow lines for QUERY stage (blue) -->
            <div id="lineDbSql"     class="flow-line flow-line-query flow-query-horiz"></div>
            <div id="connectDbSql"  class="flow-connector flow-connector-query flow-query-vert"></div>

            <!-- dashed flow lines for UPDATE stage (orange) -->
            <div id="lineDbJson"    class="flow-line flow-line-update flow-update-horiz"></div>
            <div id="connectDbJson" class="flow-connector flow-connector-update flow-update-vert"></div>

            <!-- dashed flow lines for DELETE stage (red) -->
            <!-- Mobile & Web ‚Üí DB -->
            <div id="lineMobileDelete" class="flow-line flow-line-delete flow-mobile"></div>
            <div id="lineWebDelete"    class="flow-line flow-line-delete flow-web"></div>
            <div id="connectUpDelete"   class="flow-connector flow-connector-delete flow-connect-up"></div>
            <div id="connectDownDelete" class="flow-connector flow-connector-delete flow-connect-down"></div>

            <!-- DB ‚Üí Relational Queries -->
            <div id="lineDbSqlDelete"    class="flow-line flow-line-delete flow-query-horiz"></div>
            <div id="connectDbSqlDelete" class="flow-connector flow-connector-delete flow-query-vert"></div>

            <!-- DB ‚Üí Document APIs -->
            <div id="lineDbJsonDelete"    class="flow-line flow-line-delete flow-update-horiz"></div>
            <div id="connectDbJsonDelete" class="flow-connector flow-connector-delete flow-update-vert"></div>

            <!-- Delete X markers -->
            <div id="xSqlDelete"  class="delete-x">‚úï</div>
            <div id="xJsonDelete" class="delete-x">‚úï</div>

            <div id="dbBox" class="db">
                <div class="db-title">Oracle AI Database ‚õÅ</div>
                <div class="db-sub"></div>
            </div>

            <div id="sqlSink" class="sql-sink" style="right:20px;top:50px">
                <div class="sink-title" style="color:#2563eb">Relational Queries üîç</div>
                <div style="font-size:10px;color:#666"></div>
            </div>

            <div id="jsonSink" class="json-sink" style="right:20px;top:210px">
                <div class="sink-title" style="color:#059669">Document APIs üóÇÔ∏è</div>
                <div style="font-size:10px;color:#666"></div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <button id="fsToggle" class="fs-toggle" title="Toggle Fullscreen (F)">
    <svg viewBox="0 0 24 24"><path d="M9 3H5a2 2 0 0 0-2 2v4h2V5h4V3zm6 0v2h4v4h2V5a2 2 0 0 0-2-2h-4zM3 15v4a2 2 0 0 0 2 2h4v-2H5v-4H3zm18 0h-2v4h-4v2h4a2 2 0 0 0 2-2v-4z"/></svg>
  </button>

<script>
  const customersData = [
    {"id":"123","name":"Acme","type":"enterprise","status":"active"},
    {"id":"124","name":"Jane","email":"jane@co.com","status":"active"},
    {"id":"125","name":"Bob's Shop","site":"bob.co","status":"active"}
  ];
  const newCustomers = [
    {"id":"126","name":"TechStart Inc","type":"startup","founder":"Sarah Chen"},
    {"id":"127","name":"Global Shipping","logistics":true,"regions":["NA","EU"]},
    {"id":"128","name":"Cloud Services","saas":true,"certifications":["ISO","SOC2"]},
    {"id":"129","name":"DataCorp","analytics":"advanced","employees":150}
  ];

  let currentData = JSON.parse(JSON.stringify(customersData));
  let insertIndex = 0;
  let hasCollection = false;
  let highlightRowId = null;
  let highlightFieldKey = null;

  const $ = (id)=>document.getElementById(id);
  function hintNext(btnId){ const b = $(btnId); b.classList.add('next-hint'); setTimeout(()=>b.classList.remove('next-hint'), 4200); }
  function enable(btnId){ const b = $(btnId); b.disabled = false; hintNext(btnId); }
  function disable(btnId){ $(btnId).disabled = true; }
  function formatJSON(obj){
    return JSON.stringify(obj,null,2)
      .replace(/"([^"]+)":/g,'<span class="json-key">"$1"</span>:')
      .replace(/: "([^"]*)"/g,': <span class="json-string">"$1"</span>')
      .replace(/: (\\d+)/g,': <span class="json-number">$1</span>')
      .replace(/: (true|false)/g,': <span class="json-boolean">$1</span>')
      .replace(/: null/g,': <span class="json-null">null</span>');
  }
  function renderSample(idx=0){ $('sampleContent').innerHTML = formatJSON(currentData[idx] || {}); }
  function renderTable(){
    const ctn = $('dataTableContainer');
    const tbl = $('dataTable');
    if(!hasCollection || currentData.length===0){
      ctn.style.display='none';
      return;
    }
    ctn.style.display='block';

    const keys = Array.from(new Set(currentData.flatMap(o => Object.keys(o))));
    tbl.innerHTML = '<thead><tr>' +
      keys.map(k => `<th>${k}</th>`).join('') +
      '</tr></thead>';

    const rows = currentData.map(o => {
      const isHighlightedRow = highlightRowId && o.id === highlightRowId;
      const rowClass = isHighlightedRow ? ' class="new-row"' : '';

      const cells = keys.map(k => {
        const v = o[k];
        const display =
          (v === undefined || v === null)
            ? ''
            : (typeof v === 'object' ? JSON.stringify(v) : v);

        const isHighlightedCell = isHighlightedRow && k === highlightFieldKey;
        const cellClass = isHighlightedCell ? ' class="cell-highlight"' : '';

        return `<td${cellClass}>${display}</td>`;
      }).join('');

      return `<tr${rowClass}>${cells}</tr>`;
    }).join('');

    tbl.innerHTML += '<tbody>' + rows + '</tbody>';

    // only highlight once per action
    highlightRowId = null;
    highlightFieldKey = null;
  }
  function setMode(title,desc,key){ const m=$('modeIndicator'); m.classList.add('active'); m.classList.remove('mode-create','mode-insert','mode-query','mode-update','mode-delete'); if(key==='create') m.classList.add('mode-create'); else if(key==='insert') m.classList.add('mode-insert'); else if(key==='query') m.classList.add('mode-query'); else if(key==='update') m.classList.add('mode-update'); else if(key==='delete') m.classList.add('mode-delete'); m.querySelector('.mode-title').textContent=title; m.querySelector('.mode-description').textContent=desc; }

  function setConfirm(text){ const c=$('explainConfirm'); if(!c) return; if(!text){ c.classList.remove('active'); c.textContent=''; } else { c.textContent='‚úÖ '+text; c.classList.add('active'); } }

  function setExplainState(key){
    const leftTitle = $('explainTitle'); const leftBody = $('explainBody'); const ex = $('explain'); ex.classList.add('active');
    const rt = $('explainRightTitle'); const i1 = $('explainRightItem1'); const i2 = $('explainRightItem2'); const i3 = $('explainRightItem3'); const er = $('explainRight');
    if(er){ er.classList.remove('explain-create','explain-insert','explain-query','explain-update','explain-delete');
      if(key==='create') er.classList.add('explain-create');
      else if(key==='insert') er.classList.add('explain-insert');
      else if(key==='query') er.classList.add('explain-query');
      else if(key==='update') er.classList.add('explain-update');
      else if(key==='delete') er.classList.add('explain-delete');
    }
    const copy = {
      welcome: {
        lt: 'üëã Welcome',
        lb: "This demo shows how Oracle AI Database lets you store app data as JSON and still use SQL for reports in the same system. You‚Äôll see how one database can power customer apps and business dashboards without copying data or running extra tools.",
        rt: 'What you‚Äôll do',
        bullets: [
          ['Create','Set up a JSON collection for customer data'],
          ['Insert & Report','Add new customers and report on them with SQL'],
          ['Update & Delete','Keep customer records current and clean in one place']
        ]
      },
      create: {
        lt: 'üì¶ Create JSON Collection',
        lb: "Here we create a JSON collection in Oracle AI Database to hold customer documents. JSON lets each document store slightly different details, while keeping everything in one place that is ready for both apps and analytics.",
        rt: 'Create Collection',
        bullets: [
          ['Simple start','Set up a home for JSON data in one step'],
          ['One database','Apps, reports and AI all use the same data'],
          ['Ready for growth','Data is prepared for analytics and new features']
        ]
      },
      insert: {
        lt: '‚ûï Insert JSON Documents',
        lb: "Here we add new customer records as JSON documents into the collection, like a new signup from a web or mobile app. Oracle AI Database stores this flexible JSON safely, so new customers show up right away in apps, reports, and dashboards without extra work.",
        rt: 'Insert JSON',
        bullets: [
          ['Flexible data','Each customer can have different details'],
          ['One place','Apps and reports read from the same collection'],
          ['Ready to use','As soon as data is saved, SQL and APIs can use it']
        ]
      },
      query: {
        lt: 'üîç SQL on JSON Collections',
        lb: "Here we run SQL on the JSON customers collection to build a live report. Because JSON and relational data live in one Oracle AI Database, tools can read the same customer data the app uses without copying it or running extra data jobs. This gives teams up-to-date numbers and fewer reporting mistakes.",
        rt: 'SQL on JSON',
        bullets: [
          ['Use one database','Apps, reports, and dashboards share the same data'],
          ['No extra pipelines','Skip ETL jobs and extra copies of JSON'],
          ['Faster insights','Indexes on JSON keep queries and charts quick']
        ]
      },
      update: {
        lt: '‚úèÔ∏è Modify JSON Documents',
        lb: "Here we update a customer record in the JSON collection, for example changing a customer‚Äôs status to VIP. Oracle AI Database applies the change once and makes it show up in both JSON APIs and SQL reports right away. This keeps customer info current, reduces mistakes, and helps teams react faster to account changes.",
        rt: 'Update JSON',
        bullets: [
          ['Update once','Apps and reports see the same change'],
          ['No drift','No competing copies of customer data'],
          ['Faster decisions','Fresh data supports quicker actions']
        ]
      },
      delete: {
        lt: 'üóëÔ∏è Remove JSON Documents',
        lb: "Here we delete a JSON document from the customers collection, for example when closing an old customer account. Oracle AI Database removes it safely from both JSON and SQL views, so it no longer shows up in apps, reports, or dashboards. This keeps customer records clean, reduces mistakes, and helps teams trust the numbers they see.",
        rt: 'Delete JSON',
        bullets: [
          ['Clean records','Old or closed accounts are removed in one place'],
          ['No drift','Apps and analytics all stop seeing the deleted document'],
          ['Controlled deletes','The database applies deletes safely and consistently']
        ]
      }
    };
    const c = copy[key];
    leftTitle.textContent = c.lt; leftBody.textContent = c.lb;
    setConfirm('');
    rt.textContent = c.rt;
    i1.innerHTML = '<strong>'+c.bullets[0][0]+':</strong> '+c.bullets[0][1];
    i2.innerHTML = '<strong>'+c.bullets[1][0]+':</strong> '+c.bullets[1][1];
    i3.innerHTML = '<strong>'+c.bullets[2][0]+':</strong> '+c.bullets[2][1];
  }

  const visual = $('visual');
  const dbBox = $('dbBox');
  const mobileApp = $('mobileApp');
  const webApp = $('webApp');
  const lineMobile = $('lineMobile');
  const lineWeb = $('lineWeb');
  const connectUp = $('connectUp');
  const connectDown = $('connectDown');
  // Insert-stage lines
  const lineMobileInsert = $('lineMobileInsert');
  const lineWebInsert   = $('lineWebInsert');
  const connectUpInsert   = $('connectUpInsert');
  const connectDownInsert = $('connectDownInsert');

  // Query-stage lines (DB ‚Üí Relational Queries)
  const lineDbSql    = $('lineDbSql');
  const connectDbSql = $('connectDbSql');

  // Update-stage lines (DB ‚Üí Document APIs)
  const lineDbJson    = $('lineDbJson');
  const connectDbJson = $('connectDbJson');

  // Delete-stage lines (apps ‚Üí DB ‚Üí both sinks)
  const lineMobileDelete      = $('lineMobileDelete');
  const lineWebDelete         = $('lineWebDelete');
  const connectUpDelete       = $('connectUpDelete');
  const connectDownDelete     = $('connectDownDelete');
  const lineDbSqlDelete       = $('lineDbSqlDelete');
  const connectDbSqlDelete    = $('connectDbSqlDelete');
  const lineDbJsonDelete      = $('lineDbJsonDelete');
  const connectDbJsonDelete   = $('connectDbJsonDelete');

  // Delete-stage X markers
  const xSqlDelete  = $('xSqlDelete');
  const xJsonDelete = $('xJsonDelete');

  function playConn(){}
  function spawnPacket(label, klass, animationName, duration=2000, persist=false){
    const p = document.createElement('div'); p.className = `packet ${klass}`; p.textContent = label;
    p.style.animation = `${animationName} ${duration}ms cubic-bezier(0.45, 0, 0.55, 1) 1 ${persist ? 'forwards' : ''}`; visual.appendChild(p);
    p.addEventListener('animationend', ()=> p.remove());
  }
  function pulseDB(){ dbBox.classList.remove('pulse'); void dbBox.offsetWidth; dbBox.classList.add('pulse'); }

  let animationLoopId = null;

  function stopAnimationLoop(){
    if(animationLoopId){
      clearInterval(animationLoopId);
      animationLoopId = null;
    }
    // Clean up any existing packets / pulse
    document.querySelectorAll('.packet').forEach(p=>p.remove());
    dbBox.classList.remove('pulse');
  }

  function showCreateFlowLines() {
    //horizontal lines
    if (lineMobile && lineWeb) {
      lineMobile.classList.add('active');
      lineWeb.classList.add('active');
    }

    //vertical connectors into db box
    if (connectUp && connectDown){
      connectUp.classList.add('active');
      connectDown.classList.add('active');
    }

    // glow the source + destination nodes
    if (mobileApp) glow(mobileApp);
    if (webApp) glow(webApp);
    glow(dbBox);
    pulseDB();

    // turn off lines so the loop can pulse again
    setTimeout(() => {
      if (lineMobile) lineMobile.classList.remove('active');
      if (lineWeb) lineWeb.classList.remove('active');
      if (connectUp) connectUp.classList.remove('active');
      if (connectDown) connectDown.classList.remove('active');
    }, 1800);
  }

  function showInsertFlowLines() {
    // horizontal insert lines
    if (lineMobileInsert && lineWebInsert) {
      lineMobileInsert.classList.add('active');
      lineWebInsert.classList.add('active');
    }

    // vertical insert connectors
    if (connectUpInsert && connectDownInsert) {
      connectUpInsert.classList.add('active');
      connectDownInsert.classList.add('active');
    }

    // glow the same nodes (apps + DB)
    if (mobileApp) glow(mobileApp);
    if (webApp) glow(webApp);
    glow(dbBox);
    pulseDB();

    // turn off so the loop can pulse again
    setTimeout(() => {
      if (lineMobileInsert) lineMobileInsert.classList.remove('active');
      if (lineWebInsert)   lineWebInsert.classList.remove('active');
      if (connectUpInsert)   connectUpInsert.classList.remove('active');
      if (connectDownInsert) connectDownInsert.classList.remove('active');
    }, 1800);
  }

  function showQueryFlowLines() {
    // Keep showing the insert lines while we query
    showInsertFlowLines();

    // Blue DB ‚Üí Relational Queries path
    if (lineDbSql && connectDbSql) {
      lineDbSql.classList.add('active');
      connectDbSql.classList.add('active');
    }

    const sqlSink = document.getElementById('sqlSink');
    glow(dbBox);
    glow(sqlSink);
    pulseDB();

    // turn off so the loop can pulse again
    setTimeout(() => {
      if (lineDbSql)   lineDbSql.classList.remove('active');
      if (connectDbSql) connectDbSql.classList.remove('active');
    }, 1800);
  }

  function showUpdateFlowLines() {
    // Keep showing the insert lines while we update
    showInsertFlowLines();

    // Orange DB ‚Üí Document APIs path
    if (lineDbJson && connectDbJson) {
      lineDbJson.classList.add('active');
      connectDbJson.classList.add('active');
    }

    const jsonSink = document.getElementById('jsonSink');
    glow(dbBox);
    glow(jsonSink);
    pulseDB();

    // turn off so the loop can pulse again
    setTimeout(() => {
      if (lineDbJson)    lineDbJson.classList.remove('active');
      if (connectDbJson) connectDbJson.classList.remove('active');
    }, 1800);
  }

  function showDeleteFlowLines() {
    // Red DB ‚Üí Relational Queries
    if (lineDbSqlDelete && connectDbSqlDelete) {
      lineDbSqlDelete.classList.add('active');
      connectDbSqlDelete.classList.add('active');
    }

    // Red DB ‚Üí Document APIs
    if (lineDbJsonDelete && connectDbJsonDelete) {
      lineDbJsonDelete.classList.add('active');
      connectDbJsonDelete.classList.add('active');
    }

    // X markers on the sink lines
    if (xSqlDelete && xJsonDelete) {
      xSqlDelete.classList.add('active');
      xJsonDelete.classList.add('active');
    }

    const sqlSink  = document.getElementById('sqlSink');
    const jsonSink = document.getElementById('jsonSink');

    // Glow DB and both sinks (no more mobile/web glow here)
    glow(dbBox);
    glow(sqlSink);
    glow(jsonSink);
    pulseDB();

    // turn off so the loop can pulse again
    setTimeout(() => {
      if (lineDbSqlDelete)     lineDbSqlDelete.classList.remove('active');
      if (connectDbSqlDelete)  connectDbSqlDelete.classList.remove('active');
      if (lineDbJsonDelete)    lineDbJsonDelete.classList.remove('active');
      if (connectDbJsonDelete) connectDbJsonDelete.classList.remove('active');
      if (xSqlDelete)          xSqlDelete.classList.remove('active');
      if (xJsonDelete)         xJsonDelete.classList.remove('active');
    }, 1800);
  }

  function runStageAnimation(stage){
    if (stage === 'create') {
      // dashed lines from apps ‚Üí DB
      showCreateFlowLines();
      // green packets riding those lines
      spawnPacket('JSON Document', 'p-json', 'jsonFromMobileToDB', 2400);
      spawnPacket('JSON Document', 'p-json', 'jsonFromWebToDB',   2400);

    } else if (stage === 'insert') {
      // purple dashed lines (insert)
      showInsertFlowLines();
      // purple packets riding same path
      spawnPacket('JSON Document', 'p-insert', 'jsonFromMobileToDB', 2400);
      spawnPacket('JSON Document', 'p-insert', 'jsonFromWebToDB',   2400);

    } else if (stage === 'query') {
      // keep your existing blue lines DB ‚Üí Relational Queries
      showQueryFlowLines();
      // blue results packet along that L-shaped path
      spawnPacket('SQL Results', 'p-sql', 'dbToSQLLand', 2400, false);

    } else if (stage === 'update') {
      // orange lines DB ‚Üí Document APIs
      showUpdateFlowLines();
      // orange JSON packet along that path, and it can persist if you like
      spawnPacket('JSON Document', 'p-der', 'dbToJSONLand', 2400, true);

    } else if (stage === 'delete') {
      // red delete lines DB ‚Üí sinks + Xs
      showDeleteFlowLines();
      // red "Deleted" packets flowing from DB out to both sinks, stopping at the X
      spawnPacket('Deleted', 'p-der', 'dbDeleteToSQL',  2400, false);
      spawnPacket('Deleted', 'p-der', 'dbDeleteToJSON', 2400, false);
    }
  }

  function startAnimationLoop(stage){
    stopAnimationLoop();              // stop any previous stage
    runStageAnimation(stage);         // run once immediately
    animationLoopId = setInterval(()=>runStageAnimation(stage), 2600); // loop until next button
  }

  function glow(el){ if(!el) return; el.classList.remove('dest-glow'); void el.offsetWidth; el.classList.add('dest-glow'); setTimeout(()=>el.classList.remove('dest-glow'), 1300); }

  $('btnCreate').addEventListener('click',()=>{
    hasCollection = true;
    setMode('Create Collection',"'Customers' JSON collection was created with a flexible schema and is fully accessible using SQL.",'create');
    setExplainState('create');
    // Hide and clear any previous SQL output
    $('sqlOutput').style.display = 'none';
    $('sqlQuery').textContent = '';
    /*const rs=$('resultsSummary'); rs.style.display='block';
    rs.querySelector('.results-text').textContent="‚úîÔ∏è Collection 'customers' created"; */
    setConfirm("Created the 'customers' JSON Collection. It is immediately available for JSON APIs and SQL analytics in one place.");
    renderSample(0); renderTable();
    $('sampleContent').innerHTML =
    `<strong>POST /api/customers</strong>
    <strong> Content-Type: application/json</strong>

${JSON.stringify(customersData, null, 2)}`;
    startAnimationLoop('create')
    complete('btnCreate'); enable('btnInsert');
  });


  $('btnInsert').addEventListener('click',()=>{
    if(!hasCollection) return;
    // Hide previous SQL when inserting
    $('sqlOutput').style.display = 'none';
    $('sqlQuery').textContent = '';
    if(insertIndex < newCustomers.length){
      const newDoc = newCustomers[insertIndex++];
      currentData.push(newDoc);
      highlightRowId = newDoc.id;
      setMode('Insert', 'A new JSON document was Inserted into Customers.','insert'); setExplainState('insert');
      renderSample(currentData.length-1); renderTable();
      const _insName = currentData[currentData.length-1]?.name || 'New document';
      setConfirm(`Inserted document - ${_insName}. Instantly queryable via SQL and available to APIs without ETL or schema changes.`);
      startAnimationLoop('insert');
      complete('btnInsert');
      if(insertIndex === 1){ enable('btnQuery'); }
      if(insertIndex >= newCustomers.length){ disable('btnInsert'); }
    }
  });

  $('btnQuery').addEventListener('click',()=>{
    if(!hasCollection) return;
    setMode('SQL Query','Run standard SQL over JSON documents in the collection.','query'); setExplainState('query');
    const res = currentData.filter(r => r.type==='enterprise').map(r=>({name:r.name,email:r.email||null,type:r.type||null}));
    $('sqlOutput').style.display='block';
    $('sqlQuery').textContent =
`SELECT data.name, data.email, data.type
FROM   customers
WHERE  data.type = 'enterprise';

-- Results:
${JSON.stringify(res,null,2)}`;
    /*const rs=$('resultsSummary'); rs.style.display='block';
    rs.querySelector('.results-text').textContent=`Returned ${res.length} row(s)`; */
    setConfirm(`Generated a live SQL report over the JSON Collection. Results reflect the same data used by the apps ‚Äî no movement, no duplication.`);
    startAnimationLoop('query');
    complete('btnQuery'); enable('btnUpdate');
  });

  $('btnUpdate').addEventListener('click',()=>{
    if(!hasCollection) return;
    const t = currentData.find(r=>r.id==='124');
    if(t){
      t.status = (t.status==='active' ? 'vip' : 'active');
    }
    setMode('Update','Modify a document field; changes are immediately queryable via SQL.','update');
    setExplainState('update');
    highlightRowId = t ? t.id : null;
    highlightFieldKey = 'status';  // light up the status cell

    // Show the JSON payload used to perform the modification
    // Show the HTTP PUT request the app would send
    const updatedDoc = {
      id: t ? t.id : '124',
      name: t ? t.name : 'Jane',
      email: t ? t.email : 'jane@co.com',
      status: t ? t.status : 'vip'
    };
    $('sampleContent').innerHTML =
  `<strong>PUT /api/customers/${updatedDoc.id}</strong>
  <strong>  Content-Type: application/json</strong>

${JSON.stringify(updatedDoc, null, 2)}`;

    renderTable();
    const _updName = (t && t.name) ? t.name : 'Target document';
    setConfirm(`Modified document - ${_updName}. The update is applied safely and fully, and both JSON APIs and SQL queries see the same new information.`);
    // SQL panel: SELECT-only version reflecting updated data
    document.getElementById('sqlOutput').style.display = 'block';
    if(t){
      document.getElementById('sqlQuery').textContent =
`-- Read back the updated document:
SELECT JSON_VALUE(data, '$.id')    AS id,
       JSON_VALUE(data, '$.name')  AS name,
       JSON_VALUE(data, '$.status') AS status
FROM customers
WHERE JSON_VALUE(data, '$.id') = '124';

-- Result:
ID   NAME    STATUS
---  ------  ------
${t.id}  ${t.name}     ${t.status}`;
    }
    startAnimationLoop('update');
    complete('btnUpdate');
    enable('btnDelete');
});

  $('btnDelete').addEventListener('click',()=>{
    if(!hasCollection) return;
    const idx = currentData.findIndex(r=>r.id==='125');
    let deleted = null;
    if(idx > -1){
      deleted = currentData[idx];
      currentData.splice(idx,1);
    }
    setMode('Delete','Remove a document from the collection.','delete');
    setExplainState('delete');
    // Show the HTTP DELETE request the app would send, plus the JSON identifier
    $('sampleContent').innerHTML =
    `<strong>DELETE /api/customers/${deleted ? deleted.id : '125'}</strong>
    <strong>Content-Type: application/json</strong>
    ${JSON.stringify({id: deleted ? deleted.id : '125'}, null, 2)}`;
    renderTable();
    const _delName = (deleted && deleted.name) ? deleted.name : 'Document';
    setConfirm(`Removed document - ${_delName}. The document is fully removed so apps, reports, and analytics no longer see it.`);
    // SQL panel: show that the deleted document no longer appears
    $('sqlOutput').style.display = 'block';
    $('sqlQuery').textContent =
`-- Check that the document has been removed:
SELECT data.id, data.name
FROM customers
WHERE data.id = '125';

-- Result:
[]  -- no rows`;
    // Animation: show delete flowing out 
    startAnimationLoop('delete');
    complete('btnDelete');
  });

  $('btnReset').addEventListener('click',()=>{
    // Cold-start reset
    stopAnimationLoop();
    currentData = JSON.parse(JSON.stringify(customersData));
    insertIndex = 0; hasCollection=false;
    $('modeIndicator').classList.remove('active');
    /*$('resultsSummary').style.display='none';*/
    $('sqlOutput').style.display='none';
    $('sampleContent').textContent='';
    $('dataTableContainer').style.display='none';
    Array.from(document.querySelectorAll('.btn')).forEach(b=>b.classList.remove('completed'));
    ['btnInsert','btnQuery','btnUpdate','btnDelete'].forEach(disable);
    enable('btnCreate');
    setExplainState('welcome'); setConfirm(''); setConfirm('');
    document.querySelectorAll('.packet').forEach(p=>p.remove());
    window.scrollTo({top:0,behavior:'smooth'});
  });

  function complete(btnId){ $(btnId).classList.add('completed'); $(btnId).classList.remove('next-hint'); }

  function toggleFS(){ if(!document.fullscreenElement){ document.documentElement.requestFullscreen?.(); } else{ document.exitFullscreen?.(); } }
  $('fsToggle').addEventListener('click',toggleFS);
  window.addEventListener('keydown',e=>{ if(e.key.toLowerCase()==='f') toggleFS(); });

  // Initial load: show WELCOME, do not auto-run animations
  $('sampleContent').textContent='';
  renderTable();
  ['btnInsert','btnQuery','btnUpdate','btnDelete'].forEach(disable);
  hintNext('btnCreate');
  setExplainState('welcome'); setConfirm(''); setConfirm('');
</script>
</body>
</html>
